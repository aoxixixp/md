# Notes



## 一、`scanf()`函数的使用细节

​		用户每次按下回车键，程序就会认为完成了一次输入操作，`scanf()` 开始读取用户输入的内容，并根据格式控制字符串从中提取有效数据，只要用户输入的内容和格式控制字符串匹配，就能够正确提取。

​		本质上讲，用户输入的内容都是**字符串**，`scanf()` 完成的是***从字符串中提取有效数据的过程***。

​		从本质上讲，我们从键盘输入的数据并没有直接交给 `scanf()`，而是放入了**缓冲区**中，直到我们按下回车键，**<u>`scanf() `才到缓冲区中读取数据</u>**。如果缓冲区中的数据符合` scanf()` 的要求，那么就读取结束；如果不符合要求，那么就继续等待用户输入，或者干脆读取失败。



#### 		`scanf（）`输入的数据类型

​		整数、单个字符、字符串（字符数组或指针）以及小数；	

```c
    scanf("%c", &letter);	//输入单个字符
    scanf("%d", &age);		//输入整数
    scanf("%s", url); 		//输入字符串（字符数组或指针）可以加&也可以不加&
    scanf("%f", &price);	//输入小数
```

> **当遇到 `scanf()` 函数时，程序会先检查输入缓冲区中是否有数据：
> 如果没有，就等待用户输入。用户从键盘输入的每个字符都会暂时保存到缓冲区，直到按下回车键，产生换行符`\n`，输入结束，`scanf()` 再从缓冲区中读取数据，赋值给变量。**
>
> **如果有数据，那就看是否符合控制字符串的规则：
> 如果能够匹配整个控制字符串，那最好了，直接从缓冲区中读取就可以了，就不用等待用户输入了。
> 如果缓冲区中剩余的所有数据只能匹配前半部分控制字符串，那就等待用户输入剩下的数据。
> 如果不符合，`scanf()` 还会尝试忽略一些空白符，例如空格、制表符、换行符等：
> 如果这种尝试成功（可以忽略一些空白符），那么再重复以上的匹配过程。
> 如果这种尝试失败（不能忽略空白符），那么只有一种结果，就是读取失败。**

**`scanf()`、`gets()` 在读取字符串时会忽略换行符，不会把换行符作为字符串的内容。**

```c
#include <stdio.h>
int main()
{
    int a = 1, b = 2;
    scanf("a=%d", &a);
    scanf("b=%d", &b);
    printf("a=%d, b=%d\n", a, b);

    return 0;
}
```

**<u>当需要像这样连续`scanf()`时，要么就将两次的输入合在一起没有空格，要么就将代码改成下面的代码实现两行输入</u>**

```c
#include <stdio.h>
int main()
{
    int a = 1, b = 2;
    scanf("a=%d\r", &a);//将格式直接写成回车的转义字符，即实现回车后将回车的转义字符直接从缓冲区去掉
    scanf("b=%d", &b);
    printf("a=%d, b=%d\n", a, b);

    return 0;
}
```



## 二、C语言中的字符与字符串的细节

​		字符类型由单引号`' '`包围，字符串由双引号`" "`包围。

> ​		字符类型只能用单引号`''`

​		char 类型不能包含 ASCII 编码之外的字符。

### 		字符的输出

​		**专门的字符输出函数`putchar（）`**	//每次只能输出一个字符，需要输出多个字符需要调用多次

​		**使用`printf()`输出，char类型对应的格式控制符是`%c`**

### 		字符与整数

​		我们知道，计算机在存储字符时并不是真的要存储字符实体，而是存储该字符在字符集中的编号（也可以叫编码值）。对于 char 类型来说，它实际上存储的就是字符的 ASCII 码。

​		**无论在哪个字符集中，字符编号都是一个整数；**<u>从这个角度考虑，字符类型和整数类型本质上没有什么区别。</u>

​		我们可以给字符类型赋值一个整数，或者以整数的形式输出字符类型。反过来，也可以给整数类型赋值一个字符，或者以字符的形式输出整数类型。

```c
#include <stdio.h>
int main()
{
    char a = 'E';
    char b = 70;
    int c = 71;
    int d = 'H';

    printf("a: %c, %d\n", a, a);
    printf("b: %c, %d\n", b, b);
    printf("c: %c, %d\n", c, c);
    printf("d: %c, %d\n", d, d);

    return 0;
}//在 ASCII 码表中，字符 'E'、'F'、'G'、'H' 对应的编号分别是 69、70、71、72。
```

> **a、b、c、d 实际上存储的都是整数：**
>
> - **当给 a、d 赋值一个字符时，字符会先转换成 ASCII 码再存储；**
> - **当给 b、c 赋值一个整数时，不需要任何转换，直接存储就可以；**
> - **当以 %c 输出 a、b、c、d 时，会根据 ASCII 码表将整数转换成对应的字符；**
> - **当以 %d 输出 a、b、c、d 时，不需要任何转换，直接输出就可以。**

### 		字符串

> ​		**其实在C语言中没有专门的字符串类型，我们只能使用[数组](http://c.biancheng.net/cpp/u/c7/)或者[指针](http://c.biancheng.net/cpp/u/c10/)来间接地存储字符	串。**

​		字符串的两种表示方法：

```c
char str1[] = "http://c.biancheng.net";
char *str2 = "C语言中文网";
```

​		**注意：	要使用双引号`" "`，要么在名字前加`*`，要么在名字后面加`[]`；**

> **但是这两种形式是有区别的：**
>
> ​		**第一种形式`str1[]`的字符串所在的内存既有读取权限又有写入权限，第二种形式`*str2`的字符串所在	的内存只有读取权限，没有写入权限。**
>
> **<u>即数组的字符串既可读又可写；引用类型只可输出不可写入</u>**

### 	字符串的输出

​		**专用的字符串输出函数`puts()`**

​		**使用`printf()`输出，字符串类型对应的格式控制符是`%s`**

```c
#include <stdio.h>
int main()
{
    char web_url[] = "http://c.biancheng.net";
    char *web_name = "C语言中文网";

    puts(web_url);
    puts(web_name);
    printf("%s\n%s\n", web_url, web_name);

    return 0;
}
```

## 二、 

不管我们编写的代码有多么简单，都必须经过「编译 --> 链接」的过程才能生成可执行文件：

- 编译就是将我们编写的源代码“翻译”成计算机可以识别的二进制格式，它们以目标文件的形式存在；
- 链接就是一个“打包”的过程，它将所有的目标文件以及系统组件组合成一个可执行文件。

### 三、

**先来看`%d`，d 是 decimal 的缩写，意思是十进制数，`%d` 表示以十进制整数的形式输出。**

**`%d`称为格式控制符，它指明了以何种形式输出数据。格式控制符均以`%`开头，后跟其他字符。`%d` 表示以十进制形式输出一个整数。除了 `%d`，`printf` 支持更多的格式控制，例如：**

- **`%c`：输出一个字符。c 是 character 的简写。**
- **`%s`：输出一个字符串。s 是 string 的简写。**
- **`%f`：输出一个小数。f 是 float 的简写。**

> **要点提示：**
> **1) `\n`是一个整体，组合在一起表示一个换行字符。换行符是 `ASCII 编码`中的一个控制字符，无法在键盘上直接输入，只能用这种特殊的方法表示，被称为<u>转义字符</u>.**
>
> > **所谓换行，就是让文本从下一行的开头输出，相当于在编辑 Word 或者 TXT 文档时按下回车键。**
>
> **`puts` 输出完成后会自动换行，而 `printf` 不会，要自己添加换行符，这是 `puts` 和 `printf` 在输出字符串时的一个区别。**
>
> **2) `//`后面的为注释。注释用来说明代码是什么意思，起到提示的作用，可以帮助我们理解代码。注释虽然也是代码的一部分，但是它并不会给程序带来任何影响，编译器在编译阶段会忽略注释的内容，或者说删除注释的内容。**
>
> **3) money 的输出值并不是 93.96，而是一个非常接近的值，这与小数本身的存储机制有关，这种机制导致很多小数不能被精确地表示，即使像 93.96 这种简单的小数也不行。**

# 四、

`sizeof` 用来获取某个数据类型或变量所占用的字节数，如果后面跟的是变量名称，那么可以省略`( )`，如果跟的是数据类型，就必须带上`( )`。

需要注意的是，`sizeof` 是C语言中的操作符，不是<u>函数</u>，所以可以不带`( )`

> **当使用`%d`输出 short，或者使用`%ld`输出 short、int 时，不管值有多大，都不会发生错误，因为格式控制符足够容纳这些值。**
>
> **当使用`%hd`输出 int、long，或者使用`%d`输出 long 时，如果要输出的值比较小（就像上面的情况），一般也不会发生错误，如果要输出的值比较大，就很有可能发生错误.**

# 五、二进制、八进制和十六进制的赋值与输出

## 二进制数、八进制数和十六进制数的赋值

一个数字默认就是十进制的，表示一个十进制数字不需要任何特殊的格式。但是，表示一个二进制、八进制或者十六进制数字就不一样了，为了和十进制数字区分开来，必须采用某种特殊的写法，具体来说，就是在数字前面加上特定的字符，也就是加前缀。

#### 1) 二进制

二进制由 0 和 1 两个数字组成，使用时必须以`0b`或`0B`（不区分大小写）开头，例如：

```c
//合法的二进制
int a = 0b101;  //换算成十进制为 5
int b = -0b110010;  //换算成十进制为 -50
int c = 0B100001;  //换算成十进制为 33

//非法的二进制
int m = 101010;  //无前缀 0B，相当于十进制
int n = 0B410;  //4不是有效的二进制数字
```

> **读者请注意，标准的C语言并不支持上面的二进制写法，只是有些编译器自己进行了扩展，才支持二进制数字。换句话说，并不是所有的编译器都支持二进制数字，只有一部分编译器支持，并且跟编译器的版本有关系。**

#### 2) 八进制

八进制由 0~7 八个数字组成，使用时必须以`0`开头（注意是数字 0，不是字母 o），例如：

```c
//合法的八进制数
int a = 015;  //换算成十进制为 13
int b = -0101;  //换算成十进制为 -65
int c = 0177777;  //换算成十进制为 65535

//非法的八进制
int m = 256;  //无前缀 0，相当于十进制
int n = 03A2;  //A不是有效的八进制数字
```

#### 3) 十六进制

十六进制由数字 0~9、字母 A~F 或 a~f（不区分大小写）组成，使用时必须以`0x`或`0X`（不区分大小写）开头，例如：

```c
//合法的十六进制
int a = 0X2A;  //换算成十进制为 42
int b = -0XA0;  //换算成十进制为 -160
int c = 0xffff;  //换算成十进制为 65535

//非法的十六进制
int m = 5A;  //没有前缀 0X，是一个无效数字
int n = 0X3H;  //H不是有效的十六进制数字
```

#### 4) 十进制

十进制由 0~9 十个数字组成，没有任何前缀，和我们平时的书写格式一样，不再赘述。

## 二进制数、八进制数和十六进制数的输出

C语言中常用的整数有 short、int 和 long 三种类型，通过 `printf` 函数，可以将它们以八进制、十进制和十六进制的形式输出。上节我们讲解了如何以十进制的形式输出，这节我们重点讲解如何以八进制和十六进制的形式输出，下表列出了不同类型的整数、以不同进制的形式输出时对应的格式控制符：

|          | short          | int        | long           |
| -------- | -------------- | ---------- | -------------- |
| 八进制   | %ho            | %o         | %lo            |
| 十进制   | `%hd`          | %d         | `%ld`          |
| 十六进制 | %hx 或者 `%hX` | %x 或者 %X | %lx 或者 `%lX` |

> **十六进制数字的表示用到了英文字母，有大小写之分，要在格式控制符中体现出来：**
>
> - **%hx、%x 和 %lx 中的`x`小写，表明以小写字母的形式输出十六进制数；**
> - **%hX、%X 和 %lX 中的`X`大写，表明以大写字母的形式输出十六进制数。**


八进制数字和十进制数字不区分大小写，所以格式控制符都用小写形式。如果你比较叛逆，想使用大写形式，那么行为是未定义的，请你慎重：

- 有些编译器支持大写形式，只不过行为和小写形式一样；
- 有些编译器不支持大写形式，可能会报错，也可能会导致奇怪的输出。


注意，虽然部分编译器支持二进制数字的表示，但是却不能使用 `printf` 函数输出二进制，这一点比较遗憾。当然，通过转换函数可以将其它进制数字转换成二进制数字，并以字符串的形式存储，然后在 `printf` 函数中使用`%s`输出即可。考虑到读者的基础还不够，这里就先不讲这种方法了。

【实例】以不同进制的形式输出整数：

```c
#include <stdio.h>

int main()
{
    short a = 0b1010110;  //二进制数字
    int b = 02713;  //八进制数字
    long c = 0X1DAB83;  //十六进制数字
    printf("a=%ho, b=%o, c=%lo\n", a, b, c);  //以八进制形似输出
    printf("a=%hd, b=%d, c=%ld\n", a, b, c);  //以十进制形式输出
    printf("a=%hx, b=%x, c=%lx\n", a, b, c);  //以十六进制形式输出（字母小写）
    printf("a=%hX, b=%X, c=%lX\n", a, b, c);  //以十六进制形式输出（字母大写）
    return 0;
}
//运行结果：
//a=126, b=2713, c=7325603
//a=86, b=1483, c=1944451
//a=56, b=5cb, c=1dab83
//a=56, b=5CB, c=1DAB83
```

从这个例子可以发现，一个数字不管以何种进制来表示，都能够以任意进制的形式输出。数字在内存中始终以二进制的形式存储，其它进制的数字在存储前都必须转换为二进制形式；同理，一个数字在输出时要进行逆向的转换，也就是从二进制转换为其他进制。

#### 输出时加上前缀

请读者注意观察上面的例子，会发现有一点不完美，如果只看输出结果：

- 对于八进制数字，它没法和十进制、十六进制区分，因为八进制、十进制和十六进制都包含 0~7 这几个数字。
- 对于十进制数字，它没法和十六进制区分，因为十六进制也包含 0~9 这几个数字。如果十进制数字中还不包含 8 和 9，那么也不能和八进制区分了。
- 对于十六进制数字，如果没有包含 a~f 或者 A~F，那么就无法和十进制区分，如果还不包含 8 和 9，那么也不能和八进制区分了。
